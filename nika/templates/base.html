<!-- base.html -->
{% load static %}
<html lang="en" data-theme="{{ theme }}">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}{% endblock %}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="assistant">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/' %}{{ theme }}.css" id="theme-link">
        <link rel="shortcut icon" type="image/png" href="{% static 'img/favicon.ico' %}">
    </head>
    <body>
        <div class="container">
            <div class="row page-header">
                <div class="col">
                    <h1 class="avatar-top">
                        <a href="{% url 'index' %}">
                        <img src="{% static 'img/avatar.jpg' %}"/>
                        <span class="author-name">Марат Никанов</span>
                        </a>

                        <input type="checkbox" id="theme-toggle-button" onclick="toggleTheme()">
                        <label for="theme-toggle-button">
                            <!-- Theme toggle button content -->
                        </label>
                    </h1>
                </div> 
            </div>
            {% block content %}
            {% endblock %}
        </div>


        <footer class="footer">
            <div class="container">
            Марат Никанов. {% now "d F Y" %}
            </div>
        </footer>
        
        <script>
            // Function to toggle between light and dark themes
            function toggleTheme() {
                const currentTheme = localStorage.getItem('theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
                // Update the theme
                document.documentElement.setAttribute('data-theme', newTheme);
            
                // Update the theme-specific CSS file
                const themeLink = document.getElementById('theme-link');
                themeLink.href = `/static/css/${newTheme}.css`;
            
                // Update the theme toggle button text and icon
                const themeToggleButton = document.getElementById('theme-toggle-button');
                themeToggleButton.checked = newTheme === 'dark';
                themeToggleButton.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun"></i> Light Mode' : '<i class="fas fa-moon"></i> Dark Mode';
            
                // Store the theme preference in local storage
                localStorage.setItem('theme', newTheme);
            }
            
            // Check for saved theme in local storage on page load
            window.onload = function() {
                const savedTheme = localStorage.getItem('theme') || 'light';
                document.documentElement.setAttribute('data-theme', savedTheme);
                document.getElementById('theme-link').href = `/static/css/${savedTheme}.css`;
                document.getElementById('theme-toggle-button').checked = savedTheme === 'dark';
                document.getElementById('theme-toggle-button').innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i> Light Mode' : '<i class="fas fa-moon"></i> Dark Mode';
            };
    
        </script>
    </body>
</html>
